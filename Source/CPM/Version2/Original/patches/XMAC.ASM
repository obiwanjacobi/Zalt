;
;XMAC --
;  MACRO ASSEMBLER "MAC" CHANGES TO DISABLE 8080 OPCODES FOR CROSS-ASSEMBLY
;    WORK
;  THIS PATCH WAS ORIGINALLY SUPPLIED WITH MY MAC MANUAL -- RLC
;  THIS IS TO BE PATCHED INTO MAC USING DDT.  AFTER THE PATCH IS COMPLETE,
;    PERFORM A "SAVE 46 XMAC.COM" TO CREATE XMAC.COM.
;
 
RT	EQU	25	; 8080 REGISTER NAME
PT	EQU	26	; PSEUDO OPCODE TYPE
TAREA	EQU	2561H	; FREE AREA IN TOKEN MODULE
 
;
	ORG	2444H	; OVERLAY INXH - MOV B,M - RET
	JMP	TAREA
 
;
	ORG	TAREA
 
;  TYPE IS IN THE ACCUMULATOR
	CPI	RT	; BELOW RT IF ARITHMETIC OPERATOR
	JC	TYPEOK
	CPI	PT	; PSEUDO OP?
	RNZ		; RETURN WITH NON-ZERO FLAG
 
;  OTHERWISE, PSEUDO-OP OR ARITHMETIC OP
TYPEOK:
	INX	H
	MOV	B,M
	CMP	A	; SET ZERO FLAG
	RET
 
	END
